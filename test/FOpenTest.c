// Copyright (c) 2020 Arista Networks, Inc.  All rights reserved.
// Arista Networks, Inc. Confidential and Proprietary.

#include <alloca.h>
#include <stdio.h>
#include <assert.h>

// read the first "content_length" bytes from the named file and verify they
// are as expected.
void fopen_test(const char *name, const char *expected, size_t content_length) {
   FILE *f = fopen(name, "r");
   assert(f);
   char *buf = (char *)alloca(content_length);
   int rc = fread(buf, 1, content_length, f);
   assert(rc == content_length);
   for (size_t i = 0; i < content_length; ++i) {
      assert(buf[i] == expected[i]);
   }
   fclose(f);
}


